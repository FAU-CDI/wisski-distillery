<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Distillery Control Page - {{ .Info.Slug }}</title>
    {{ CSS }}
</head>

<body>
    <header>
        <h1 id="top">Distillery Control Page - {{ .Info.Slug }}</h1>
        <small>Generated at <code class="date">{{ .Time.Format "2006-01-02T15:04:05Z07:00" }}</code></small>
        <p>
            <a class="pure-button" href="/dis/index">Control</a> &gt;
            <a class="pure-button pure-button-primary" href="/dis/instance/{{ .Info.Slug }}">Instance</a>
        </p>
    </header>

    <main>
        <div class="pure-g">
            <div class="pure-u-1-1">
                <h2 id="overview">Instance Overview</h2>
            </div>
            <div class="pure-u-1 pure-u-xl-1-3">
                <div class="padding">
                    <div class="overflow">
                        <table class="pure-table pure-table-bordered">
                            <thead>
                                <tr>
                                    <th colspan="2">
                                        Overview
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        Slug
                                    </td>
                                    <td>
                                        <code>{{ .Info.Slug }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        URL
                                    </td>
                                    <td>
                                        <a href="{{ .Info.URL }}" target="_blank" rel="noopener noreferrer">{{ .Info.URL }}</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Running
                                    </td>
                                    <td>
                                        <code>{{ .Info.Running }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Locked
                                    </td>
                                    <td>
                                        <code>{{ .Info.Locked }}</code>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="pure-u-1 pure-u-xl-1-3">
                <div class="padding">
                    <div class="overflow">
                        <table class="pure-table pure-table-bordered">
                            <thead>
                                <tr>
                                    <th colspan="2">
                                        Build
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        Created
                                    </td>
                                    <td>
                                        <code class="date">{{ .Instance.Created.Format "2006-01-02T15:04:05Z07:00" }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Last Rebuild <br>
                                        <button class="remote-action pure-button pure-button-action" data-action="rebuild" data-param="{{ .Instance.Slug }}" data-buffer="1000" data-force-reload="true">Rebuild</button>
                                    </td>
                                    <td>
                                        <code class="date">{{ .Info.LastRebuild.Format "2006-01-02T15:04:05Z07:00" }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Automatic Updates
                                    </td>
                                    <td>
                                        <code>{{ .Instance.AutoBlindUpdateEnabled }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Last Update <br>
                                        <button class="remote-action pure-button pure-button-action" data-action="update" data-param="{{ .Instance.Slug }}" data-buffer="1000" data-force-reload="true">Update</button>
                                    </td>
                                    <td>
                                        <code class="date">{{ .Info.LastUpdate.Format "2006-01-02T15:04:05Z07:00" }}</code>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="pure-u-1 pure-u-xl-1-3">
                <div class="padding">
                    <div class="overflow">
                        <table class="pure-table pure-table-bordered">
                            <thead>
                                <tr>
                                    <th colspan="2">
                                        Resolver
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        Excluded
                                    </td>
                                    <td>
                                        <code>{{ .Info.NoPrefixes }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        URI Prefixes
                                    </td>
                                    <td>
                                        {{ range .Info.Prefixes }}
                                        <code>{{ . }}</code><br />
                                        {{ end}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="pure-u-1 pure-u-xl-1-3">
                <div class="padding">
                    <div class="overflow">
                        <table class="pure-table pure-table-bordered">
                            <thead>
                                <tr>
                                    <th colspan="2">
                                        Database Settings
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        SQL Database
                                    </td>
                                    <td>
                                        <code>{{ .Instance.SqlDatabase }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        SQL Username
                                    </td>
                                    <td>
                                        <code>{{ .Instance.SqlUsername }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        GraphDB Repository
                                    </td>
                                    <td>
                                        <code>{{ .Instance.GraphDBRepository }}</code>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        GraphDB Username
                                    </td>
                                    <td>
                                        <code>{{ .Instance.GraphDBUsername }}</code>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="pure-u-1 pure-u-xl-1-3">
                <div class="padding">
                    <div class="overflow">
                        <table class="pure-table pure-table-bordered">
                            <thead>
                                <tr>
                                    <th colspan="2">
                                        Whitebox Data
                                    </th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td>
                                        Pathbuilders
                                    </td>
                                    <td>
                                        <code class="pathbuilders">{{ .Info.Pathbuilders }}</code>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="pure-u-1 pure-u-xl-1-3">
                <div class="padding">
                    <div class="overflow">
                        <table class="pure-table pure-table-bordered">
                            <thead>
                                <tr>
                                    <th colspan="2">
                                        Misc Settings
                                    </th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td>
                                        Filesystem Base
                                    </td>
                                    <td>
                                        <code>{{ .Instance.FilesystemBase }}</code>
                                        <script>window.pathbuilders = {{ .Info.Pathbuilders }};</script>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="pure-u-1-1">
                <h2 id="snapshots">Snapshots</h2>
                <p>
                    <button class="remote-action pure-button pure-button-action" data-action="snapshot" data-param="{{ .Instance.Slug }}" data-buffer="1000" data-force-reload="true">Take a snapshot</button>
                </p>
            </div>

            <div class="pure-u-1">
                <table class="pure-table pure-table-bordered padding">
                    <thead>
                        <tr>
                            <th>Path</th>
                            <th>Created</th>
                            <th>Packed</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{ range .Info.Snapshots }}
                        <tr>
                            <td>
                                <code class="path">{{ .Path }}</code>
                            </td>
                            <td>
                                <code class="date">{{ .Created.Format "2006-01-02T15:04:05Z07:00" }}</code>
                            </td>
                            <td>
                                {{ .Packed }}
                            </td>
                        </tr>
                        {{ end}}
                    </tbody>
                </table>
            </div>
        </div>
        </div>
    </main>

    {{ JS }}
</body>