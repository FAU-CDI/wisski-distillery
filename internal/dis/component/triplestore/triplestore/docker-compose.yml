version: "3.7"

services:
    triplestore:
        build: .
        ports:
            - "127.0.0.1:7200:7200"
        volumes:
            - './data/data:/opt/graphdb/data'
            - './data/work:/opt/graphdb/work'
            - './data/logs:/opt/graphdb/logs'
        command: "\"-Dgraphdb.home=/opt/graphdb -Ddefault.min.distinct.threshold=2G\""
        # Use 1GB of heap space
        environment:
            GDB_HEAP_SIZE: 16G
        labels:
            - "eu.wiss-ki.barrel.distillery=${DOCKER_NETWORK_NAME}"

        restart: always

networks:
    default:
        name: ${DOCKER_NETWORK_NAME}
        external: true